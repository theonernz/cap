<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å¿«é€Ÿè¯Šæ–­</title>
</head>
<body>
    <h1>ç³»ç»Ÿè¯Šæ–­</h1>
    <div id="results"></div>
    <script>
        const results = document.getElementById('results');
        
        async function test() {
            results.innerHTML = '<p>æ­£åœ¨æµ‹è¯•...</p>';
            
            // æµ‹è¯• 1: è·å–ç”¨æˆ·åˆ—è¡¨
            try {
                const res1 = await fetch('/api/users');
                const data1 = await res1.json();
                results.innerHTML += `<h3>æµ‹è¯•1: GET /api/users</h3><pre>${JSON.stringify(data1, null, 2)}</pre>`;
            } catch(e) {
                results.innerHTML += `<h3>æµ‹è¯•1: å¤±è´¥</h3><p>${e.message}</p>`;
            }
            
            // æµ‹è¯• 2: æ³¨å†Œç”¨æˆ·
            try {
                const userData = {
                    userId: `test_${Date.now()}`,
                    username: "testuser" + Date.now(),
                    passwordHash: "testhash",
                    profile: {
                        displayName: "Test",
                        avatar: "ğŸ¦…",
                        createdAt: Date.now(),
                        lastLogin: Date.now()
                    },
                    world: { seagullCoins: 100, worldLevel: 1 }
                };
                
                const res2 = await fetch('/api/users/register', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(userData)
                });
                const data2 = await res2.json();
                results.innerHTML += `<h3>æµ‹è¯•2: POST /api/users/register</h3><pre>${JSON.stringify(data2, null, 2)}</pre>`;
            } catch(e) {
                results.innerHTML += `<h3>æµ‹è¯•2: å¤±è´¥</h3><p>${e.message}</p>`;
            }
            
            // æµ‹è¯• 3: å†æ¬¡è·å–ç”¨æˆ·åˆ—è¡¨
            try {
                const res3 = await fetch('/api/users');
                const data3 = await res3.json();
                results.innerHTML += `<h3>æµ‹è¯•3: GET /api/users (æ³¨å†Œå)</h3><pre>${JSON.stringify(data3, null, 2)}</pre>`;
            } catch(e) {
                results.innerHTML += `<h3>æµ‹è¯•3: å¤±è´¥</h3><p>${e.message}</p>`;
            }
            
            // æµ‹è¯• 4: æ£€æŸ¥æ–‡ä»¶
            try {
                const res4 = await fetch('/data/users.json');
                const data4 = await res4.json();
                results.innerHTML += `<h3>æµ‹è¯•4: GET /data/users.json</h3><pre>${JSON.stringify(data4, null, 2)}</pre>`;
            } catch(e) {
                results.innerHTML += `<h3>æµ‹è¯•4: å¤±è´¥</h3><p>${e.message}</p>`;
            }
        }
        
        test();
    </script>
</body>
</html>
